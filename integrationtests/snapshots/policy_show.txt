{
    "type": "release",
    "id": 456,
    "version": 12,
    "steps": [
        {
            "source": {
                "weight": 100
            },
            "target": {
                "weight": 0,
                "condition": "cookie: vamp exists",
                "conditionStrength": 5
            },
            "endAfter": {
                "maxDuration": "1m0s"
            },
            "conditions": [
                {
                    "metric": "Health",
                    "budget": 70,
                    "interval": {
                        "type": "rolling",
                        "duration": "5m0s"
                    },
                    "gracePeriod": "1m0s",
                    "threshold": 1,
                    "operator": "ge"
                },
                {
                    "metric": "restarts",
                    "budget": 5,
                    "interval": {
                        "type": "rolling",
                        "duration": "5m0s"
                    },
                    "gracePeriod": "1m0s"
                },
                {
                    "metric": "available replicas",
                    "budget": 90,
                    "interval": {
                        "type": "rolling",
                        "duration": "5m0s"
                    },
                    "gracePeriod": "1m0s",
                    "threshold": 80,
                    "operator": "ge"
                }
            ]
        },
        {
            "source": {
                "weight": 100
            },
            "target": {
                "weight": 0,
                "condition": "cookie: vamp exists",
                "conditionStrength": 10
            },
            "endAfter": {
                "maxDuration": "1m0s"
            },
            "conditions": [
                {
                    "metric": "Health",
                    "budget": 70,
                    "interval": {
                        "type": "rolling",
                        "duration": "5m0s"
                    },
                    "gracePeriod": "1m0s",
                    "threshold": 1,
                    "operator": "ge"
                },
                {
                    "metric": "restarts",
                    "budget": 5,
                    "interval": {
                        "type": "rolling",
                        "duration": "5m0s"
                    },
                    "gracePeriod": "1m0s"
                }
            ]
        }
    ],
    "metrics": [
        {
            "name": "restarts",
            "type": "EventBased",
            "value": {
                "source": "k8s-deployment-health",
                "type": "restarts"
            }
        },
        {
            "name": "available replicas",
            "type": "TimeBased",
            "value": {
                "source": "k8s-deployment-health",
                "type": "availablereplicas"
            }
        },
        {
            "name": "Health",
            "type": "TimeBased",
            "value": {
                "source": "k8s-deployment-health"
            }
        }
    ],
    "onSuccess": [
        {
            "type": "http",
            "value": {
                "url": "http://test.local",
                "httpRequest": "POST",
                "headers": [
                    "authorization: Bearer xxxyyy"
                ]
            }
        }
    ]
}